import{bD as Et,y as Dt,Z as Ft,i as s,j as Vt,k as Ht,G as Rt,o as F,c as Ut,b as e,w as U,a as d,t as Ot,g as Pt,f as St,F as qt,B as ht,O as zt,r as l}from"./app.bcb0820c.js";import{P as T}from"./ps_constants.115f3686.js";import Wt from"./PsIcon.c315e2a2.js";import Bt from"./PsContentContainer.baf5d5b4.js";import Gt from"./GalleryDetailHorizontalSwiper.3f7acfe2.js";import Kt from"./GalleryVerticalSwiper.73e972d1.js";import jt from"./PsLoadingDialog.9586f261.js";import Yt from"./PsConfirmDialog.e09010a6.js";import Zt from"./PsErrorDialog.d884287b.js";import Jt from"./PsFrontendLayout.c6e64cf5.js";import Qt from"./PsBreadcrumb2.ae081895.js";import Xt from"./UserListHorizontal.14c4c0f6.js";import $t from"./VendorProfileCard.3b5c6059.js";import te from"./PsLearnMoreDialog.f7bb7742.js";import ee from"./ItemDetailPriceInfoCard.c97082bb.js";import oe from"./ItemDetailLearnMoreCard.e212aacd.js";import ae from"./ItemDetailLocationCard.c6ee57e4.js";import re from"./ItemDetailInfoCard.3aff037c.js";import ie from"./ItemDetailStatisticCard.82e86afd.js";import le from"./ItemDetailRelatedItemHorizontalList.b84e0aeb.js";import de from"./ItemDetailShareAndReport.070e3c99.js";import ne from"./ItemDetailUserListHorizontal.c40ebcd4.js";import{u as Tt}from"./ProductStore.53a7e111.js";import{P as me}from"./PsValueStore.db7005b9.js";import{u as Nt}from"./GalleryStore.e5d1736d.js";import{u as se}from"./AboutUsStore.d9029d91.js";import{u as ce}from"./FavouriteItemStore.f5a1d999.js";import{u as pe}from"./AppInfoStore.e1ca82ff.js";import{a as _e,P as ue}from"./PsApiService.664f5104.js";import{A as fe}from"./ApiStatus.5720ba0b.js";import{m as ge}from"./PsSepetetedStore.9a31ac47.js";import{P as ve}from"./ProductParameterHolder.e481cecf.js";import{A as Ie}from"./AppInfoParameterHolder.e24d894d.js";import{T as ye}from"./TouchCountParameterHolder.9ce47d98.js";import{u as Mt}from"./CustomFieldStore.ad94a411.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsImageModal.ca42bf73.js";import"./vue-neat-modal.bb68220d.js";import"./DefaultPhoto.cc755f93.js";import"./PsObject.a17ef38f.js";import"./PsUtils.eb7a8002.js";import"./vue-splide.esm.0da4dbfa.js";/* empty css                   */import"./GalleryHorizontalItem.6ad3c216.js";import"./PsGalleryModal.1fd80698.js";import"./PsModal.b5929b7c.js";import"./PsLine.115a33c3.js";import"./PsLabel.f618b059.js";import"./PsButton.2af859b4.js";import"./PsLabelTitle.529f301f.js";import"./FooterView.68cf7b8a.js";import"./FooterLinkSection.3f744e23.js";import"./PsLink.dea1f7ef.js";import"./PsRouteLink.e985dbfe.js";import"./PsLabelCaption.c39c43ba.js";import"./PsNavTabBar.0d828f1e.js";import"./PsDropdown.b0f6436e.js";import"./PsDropdownSelect.1e4537ad.js";import"./PsIconToggle.b913bae4.js";import"./PsInputWithLeftIcon.432593fa.js";import"./LocationModal.5b725b64.js";import"./LocationParameterHolder.df629adc.js";import"./ItemLocationTownship.94979fe0.js";import"./ItemLocationTownshipStore.652895d4.js";import"./PsNavBar.f99c6cb9.js";import"./UserStore.6fc60c2b.js";import"./User.450a868b.js";import"./RatingDetail.291ad5d1.js";import"./ProductRelation.4bf64f0e.js";import"./UserListParameterHolder.d110b747.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./UserUnReadMessageParameterHolder.9d1f58f0.js";import"./PsNotificationBox.5b80e886.js";import"./Product.ccea159e.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./Vendor.c037b10d.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./NotificationStore.2c3becfc.js";import"./NotiUnRegisterHolder.eefb692e.js";import"https://unpkg.com/delayed-scroll-restoration-polyfill@0.1.1/index.js";import"./PsCard.748116f2.js";import"./RatingShow.238fb877.js";import"./UserListStore.657d822e.js";import"./UserFollowHolder.8b598f9e.js";import"./moment.9709ab41.js";import"./format.min.378730c4.js";import"./ProductStatusChangeParameterHolder.1fcea3b1.js";import"./OfferStore.0beb1cb3.js";import"./ItemHorizontalSwiper.6726a100.js";/* empty css                        */import"./ItemHorizontalItem.62813273.js";import"./PsLabelTitle4.02ed3a91.js";import"./PsAdSense.9b378c33.js";import"./PsValueHolder.00f22b51.js";import"./FollowItemParameterHolder.09b3e491.js";/* empty css                                                                       */import"./ItemHorizontalSkeletorItem.e166b4e0.js";import"./vue-skeletor.esm.e6de6abe.js";/* empty css                     */import"./ShareToSocialModal.b0fe3b55.js";import"./PsSuccessDialog.ac3ef60a.js";import"./ReportedItemStore.491637d6.js";import"./PsStore.dc51d097.js";const he=ge(c=>Et(`touchCountStore/${c}`,()=>{const u=Dt(new _e),N=Dt({value:!1});let t=10,o=0,p="";async function y(f,V){N.value=!0,await ue.postTouchCount(new fe,f,V.toMap()),N.value=!1}return{touchcount:u,loading:N,limit:t,offset:o,id:p,postTouchCount:y}})),Ce={name:"ItemDetailView",components:{PsLearnMoreDialog:te,PsContentContainer:Bt,PsBreadcrumb2:Qt,PsConfirmDialog:Yt,PsLoadingDialog:jt,PsErrorDialog:Zt,GalleryDetailHorizontalSwiper:Gt,UserListHorizontal:Xt,GalleryVerticalSwiper:Kt,Head:Ft,ItemDetailPriceInfoCard:ee,ItemDetailLearnMoreCard:oe,ItemDetailLocationCard:ae,ItemDetailInfoCard:re,ItemDetailStatisticCard:ie,ItemDetailRelatedItemHorizontalList:le,ItemDetailShareAndReport:de,ItemDetailUserListHorizontal:ne,VendorProfileCard:$t,PsIcon:Wt},layout:Jt,props:["query"],setup(c){const u=c.query.item_id,N="",t=Tt("related_item"),o=Tt("detail"),p=Nt("detail"),y=Nt("video"),f=se(),V=ce();t.paramHolder=new ve().getRelatedProductParameterHolder();const g=he(),pt=Mt("detail"),H=Mt("owner"),R=s(!1),O=s(1);let q=s(0),z=s(""),W=s(!1);const v=me(),n=s(v.getLoginUserId()),L=s(),M=s(),Ct=s(),B=s(!1),w=s(),k=new ye,m=pe(),G=new Ie;G.userId=v.getLoginUserId();let _t=s(!1),K=s([]);Vt(async()=>{E(),k.typeId=u,k.userId=n.value,k.typeName="item",n.value!="nologinuser"&&g.postTouchCount(n.value,k),w.value||(w.value=m.isAllPaymentDisable())}),Ht(()=>{o.item.data=null,p.galleryList.data=null,y.galleryList.data=null}),vt();function ut(){var a,r;M.value.openModal("item_detail__safety_tips",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.safetyTips)}function ft(){var a,r;M.value.openModal("term_and_condition__term_and_condition",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.termsAndConditions)}function gt(){var a,r;M.value.openModal("item_detail__faq",(r=(a=f.aboutus)==null?void 0:a.data)==null?void 0:r.faqPage)}async function E(){var a,r,_,S,h,C,b,P,A,x;await f.loadAboutUs(n.value),await o.loadItem(u,n.value),await H.loadUserCustomFieldList(n.value),K.value=o.loadProductRelation(["ps-itm00002","ps-itm00004","ps-itm00007"]);for(const i of(a=H.customField.data)==null?void 0:a.customList)if(i.coreKeysId==T.WHATSAPP_CORE_KEY_Id&&i.isVisible=="1"){const I=(S=(_=(r=o.item)==null?void 0:r.data)==null?void 0:_.user)==null?void 0:S.userRelation.filter(D=>D.coreKeysId==T.WHATSAPP_CORE_KEY_Id);I.length!=0&&((h=I[0])==null?void 0:h.value)!=null&&(z.value=(C=I[0])==null?void 0:C.value)}console.log(o),console.log((P=(b=o.item)==null?void 0:b.data)==null?void 0:P.vendor),W.value=((x=(A=o.item)==null?void 0:A.data)==null?void 0:x.vendor.expireStatus)==T.VendorExpiryExpiredStatus,await p.resetGalleryList(n.value,u,T.ITEM__RELATED_TYPE),t.paramHolder.catId=o.item.data.catId,await t.resetProductList(n.value,t.paramHolder),m.isShowItemVideo()?(y.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video-icon"),p.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video")):(y.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video-icon"&&i.imgType!="item-video"),p.galleryList.data=p.galleryList.data.filter(i=>i.imgType!="item-video"&&i.imgType!="item-video-icon")),o.promoteStatus()&&!w.value?B.value=!0:B.value=!1,await pt.loadCustomFieldList(n.value),R.value=!0}async function vt(){await m.loadAppInfo(G),m.isShowItemVideo()==T.ONE&&(_t.value=!0),parseInt(m.maxImgUploadOfItem())>=1&&(O.value=parseInt(m.maxImgUploadOfItem()),q.value=O.value+1)}async function It(){n.value&&n.value!=T.NO_LOGIN_USER?(L.value.openModal(),o.isFavourite()?L.value.message=ht("item_detail__removing_item_from_favourite"):L.value.message=ht("item_detail__adding_item_to_favourite"),await V.postFavourite(u,n.value),await E(),L.value.closeModal()):zt.get(route("login"))}const yt=Rt(()=>{var a,r,_,S,h,C,b,P,A,x,i,I,D,j,Y,Z,J,Q,X,$,tt,et,ot,at,rt,it,lt,dt,nt,mt,st,ct,At,xt,Lt,wt,kt;return(m==null?void 0:m.isShowSubCategory())||o.subCategoryIdIsEmpty()?[{label:ht("ps_nav_bar__home"),url:route("dashboard")},{label:(_=(r=(a=o.item)==null?void 0:a.data)==null?void 0:r.category)==null?void 0:_.catName,url:route("fe_item_list",{cat_id:(C=(h=(S=o.item)==null?void 0:S.data)==null?void 0:h.category)==null?void 0:C.catId,cat_name:(A=(P=(b=o.item)==null?void 0:b.data)==null?void 0:P.category)==null?void 0:A.catName,status:1})},{label:(i=(x=o.item)==null?void 0:x.data)==null?void 0:i.title,color:"text-fePrimary-500"}]:[{label:ht("ps_nav_bar__home"),url:route("dashboard")},{label:(j=(D=(I=o.item)==null?void 0:I.data)==null?void 0:D.category)==null?void 0:j.catName,url:route("fe_item_list",{cat_id:(J=(Z=(Y=o.item)==null?void 0:Y.data)==null?void 0:Z.category)==null?void 0:J.catId,cat_name:($=(X=(Q=o.item)==null?void 0:Q.data)==null?void 0:X.category)==null?void 0:$.catName,status:1})},{label:(ot=(et=(tt=o.item)==null?void 0:tt.data)==null?void 0:et.subCategory)==null?void 0:ot.name,url:route("fe_item_list",{cat_id:(it=(rt=(at=o.item)==null?void 0:at.data)==null?void 0:rt.category)==null?void 0:it.catId,cat_name:(nt=(dt=(lt=o.item)==null?void 0:lt.data)==null?void 0:dt.category)==null?void 0:nt.catName,sub_cat_id:(ct=(st=(mt=o.item)==null?void 0:mt.data)==null?void 0:st.subCategory)==null?void 0:ct.id,sub_cat_name:(Lt=(xt=(At=o.item)==null?void 0:At.data)==null?void 0:xt.subCategory)==null?void 0:Lt.name,status:1})},{label:(kt=(wt=o.item)==null?void 0:wt.data)==null?void 0:kt.title,color:"text-fePrimary-500"}]});return{loadDataForItemDetail:E,dataReady:R,appInfoProvider:m,loginUserId:n,itemId:u,itemName:N,productStore:o,galleryProvider:p,videoStore:y,aboutUsProvider:f,favouriteClicked:It,ps_loading_dialog:L,ps_learn_more_dialog:M,gallery_detail:Ct,isPromote:B,PsConst:T,safetyTip:ut,termsAndConditions:ft,faq:gt,totalCount:q,imageCount:O,itemCustomFieldStore:pt,relatedItemStore:t,productRelation:K,isAllPaymentDisable:w,whatsAppNo:z,breadcrumb:yt,relatedItem:()=>{var r;let a=[];return a.push(u),(r=t.itemList)==null?void 0:r.data.filter(_=>a.indexOf(_.id)==-1)},isVendorExpired:W}}},be={class:"mt-32 mb-10"},Pe={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-24"},Ae={key:0,class:"mt-10 mb-10 w-full h-20 bg-feWarning-100 rounded-lg mx-auto border border-md border-feWarning-500 py-5 px-10 mb-4 dark:bg-feWarning-800 dark:border-none flex justify-start items-center"},xe={class:"me-5"},Le={class:"text-feAchromatic-800 dark:text-feAchromatic-100"},we={class:"grid grid-cols-1 sm:grid-cols-12 gap-4"},ke={class:"col-span-1 sm:col-span-7 md:col-span-8"},De={class:"mt-6 sm:hidden"},Ue={class:"sm:hidden block border-2 border-feSecondary-200 rounded-md mt-4"},Te={class:"col-span-1 sm:col-span-5 md:col-span-4 hidden sm:block"},Ne={class:"border-2 border-feSecondary-200 rounded-md mt-4"};function Me(c,u,N,t,o,p){const y=l("Head"),f=l("ps-breadcrumb-2"),V=l("item-detail-share-and-report"),g=l("ps-icon"),pt=l("gallery-vertical-swiper"),H=l("item-detail-price-info-card"),R=l("item-detail-statistic-card"),O=l("item-detail-info-card"),q=l("vendor-profile-card"),z=l("item-detail-user-list-horizontal"),W=l("item-detail-location-card"),v=l("item-detail-learn-more-card"),n=l("item-detail-related-item-horizontal-list"),L=l("ps-content-container"),M=l("ps-loading-dialog"),Ct=l("gallery-detail-horizontal-swiper"),B=l("ps-learn-more-dialog");return F(),Ut(qt,null,[e(y,{title:c.$t("item__detail")},null,8,["title"]),e(L,null,{content:U(()=>{var w,k,m,G,_t,K,ut,ft,gt,E,vt,It,yt,bt,a,r,_,S,h,C,b,P,A,x,i,I,D,j,Y,Z,J,Q,X,$,tt,et,ot,at,rt,it,lt,dt,nt,mt,st,ct;return[d("div",be,[d("div",Pe,[e(f,{items:t.breadcrumb},null,8,["items"]),e(V,{loginUserId:t.loginUserId,itemId:t.itemId,itemName:t.itemName},null,8,["loginUserId","itemId","itemName"])]),((k=(w=t.productStore.item)==null?void 0:w.data)==null?void 0:k.vendor.expireStatus)==t.PsConst.VendorExpiryExpiredStatus?(F(),Ut("div",Ae,[d("div",xe,[e(g,{textColor:"text-feWarning-500",class:"pt-1",w:"30",h:"30",name:"warning-triangle"})]),d("div",Le,Ot(c.$t("subscription_expired_text")),1)])):Pt("",!0),d("div",we,[d("div",ke,[e(pt,{galleryList:(m=t.galleryProvider.galleryList)==null?void 0:m.data,video:(G=t.videoStore.galleryList)==null?void 0:G.data,isLoading:!(t.galleryProvider.galleryList.data==null&&t.dataReady)},null,8,["galleryList","video","isLoading"]),e(H,{class:"mt-6 sm:hidden",favouriteClicked:t.favouriteClicked,isAllpaymentDisable:t.isAllPaymentDisable,loginUserId:t.loginUserId,itemId:t.itemId,selectedChatType:(K=(_t=t.appInfoProvider.appInfo.data)==null?void 0:_t.psAppSetting)==null?void 0:K.SelectedChatType,loadDataForItemDetail:t.loadDataForItemDetail,whatsAppNo:t.whatsAppNo},null,8,["favouriteClicked","isAllpaymentDisable","loginUserId","itemId","selectedChatType","loadDataForItemDetail","whatsAppNo"]),e(R,{class:"mt-6 sm:hidden",loginUserId:t.loginUserId,productStore:t.productStore},null,8,["loginUserId","productStore"]),e(O,{productRelation:t.productRelation},null,8,["productRelation"]),d("div",De,[((ut=t.appInfoProvider)==null?void 0:ut.isVendorSettingOn())&&((gt=(ft=t.productStore.item)==null?void 0:ft.data)==null?void 0:gt.vendor)&&((vt=(E=t.productStore.item)==null?void 0:E.data)==null?void 0:vt.vendor.id)!=""&&((yt=(It=t.productStore.item)==null?void 0:It.data)==null?void 0:yt.user)&&((r=(a=(bt=t.productStore.item)==null?void 0:bt.data)==null?void 0:a.user)==null?void 0:r.userId)!=t.loginUserId?(F(),St(q,{key:0,vendor:(S=(_=t.productStore.item)==null?void 0:_.data)==null?void 0:S.vendor,itemId:t.itemId},null,8,["vendor","itemId"])):((C=(h=t.productStore.item)==null?void 0:h.data)==null?void 0:C.user)&&((A=(P=(b=t.productStore.item)==null?void 0:b.data)==null?void 0:P.user)==null?void 0:A.userId)!=t.loginUserId?(F(),St(z,{key:1,user:(i=(x=t.productStore.item)==null?void 0:x.data)==null?void 0:i.user,storeName:t.itemId},null,8,["user","storeName"])):Pt("",!0),e(W,{appInfoProvider:t.appInfoProvider,productStore:t.productStore},null,8,["appInfoProvider","productStore"])]),d("div",Ue,[e(v,{text:c.$t("item_detail__safety_tips"),clickLeranMore:t.safetyTip},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",class:"pt-1",w:"25",h:"24",name:"safetyTip"})])]),_:1},8,["text","clickLeranMore"]),e(v,{text:c.$t("term_and_condition__term_and_condition"),clickLeranMore:t.termsAndConditions},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"termsAndCondition"})])]),_:1},8,["text","clickLeranMore"]),e(v,{text:c.$t("item_detail__faq"),clickLeranMore:t.faq},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"faq"})])]),_:1},8,["text","clickLeranMore"])])]),d("div",Te,[e(H,{favouriteClicked:t.favouriteClicked,loginUserId:t.loginUserId,isAllpaymentDisable:t.isAllPaymentDisable,itemId:t.itemId,selectedChatType:(D=(I=t.appInfoProvider.appInfo.data)==null?void 0:I.psAppSetting)==null?void 0:D.SelectedChatType,loadDataForItemDetail:t.loadDataForItemDetail,whatsAppNo:t.whatsAppNo,isVendorExpired:t.isVendorExpired},null,8,["favouriteClicked","loginUserId","isAllpaymentDisable","itemId","selectedChatType","loadDataForItemDetail","whatsAppNo","isVendorExpired"]),((j=t.appInfoProvider)==null?void 0:j.isVendorSettingOn())&&((Z=(Y=t.productStore.item)==null?void 0:Y.data)==null?void 0:Z.vendor)&&((Q=(J=t.productStore.item)==null?void 0:J.data)==null?void 0:Q.vendor.id)!=""&&(($=(X=t.productStore.item)==null?void 0:X.data)==null?void 0:$.user)&&((ot=(et=(tt=t.productStore.item)==null?void 0:tt.data)==null?void 0:et.user)==null?void 0:ot.userId)!=t.loginUserId?(F(),St(q,{key:0,vendor:(rt=(at=t.productStore.item)==null?void 0:at.data)==null?void 0:rt.vendor,itemId:t.itemId},null,8,["vendor","itemId"])):((lt=(it=t.productStore.item)==null?void 0:it.data)==null?void 0:lt.user)&&((mt=(nt=(dt=t.productStore.item)==null?void 0:dt.data)==null?void 0:nt.user)==null?void 0:mt.userId)!=t.loginUserId?(F(),St(z,{key:1,user:(ct=(st=t.productStore.item)==null?void 0:st.data)==null?void 0:ct.user,storeName:t.itemId},null,8,["user","storeName"])):Pt("",!0),e(R,{loginUserId:t.loginUserId,productStore:t.productStore},null,8,["loginUserId","productStore"]),e(W,{appInfoProvider:t.appInfoProvider,productStore:t.productStore,mapContainer:"mapContainer2"},null,8,["appInfoProvider","productStore"]),d("div",Ne,[e(v,{text:c.$t("item_detail__safety_tips"),clickLeranMore:t.safetyTip},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",class:"pt-1",w:"25",h:"24",name:"safetyTip"})])]),_:1},8,["text","clickLeranMore"]),e(v,{text:c.$t("term_and_condition__term_and_condition"),clickLeranMore:t.termsAndConditions},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"termsAndCondition"})])]),_:1},8,["text","clickLeranMore"]),e(v,{text:c.$t("item_detail__faq"),clickLeranMore:t.faq},{icon:U(()=>[d("div",null,[e(g,{textColor:"text-feAchromatic-900 dark:text-feAchromatic-100",name:"faq"})])]),_:1},8,["text","clickLeranMore"])])])]),e(n)])]}),_:1}),e(M,{ref:"ps_loading_dialog"},null,512),e(Ct,{ref:"gallery_detail"},null,512),e(B,{ref:"ps_learn_more_dialog"},null,512)],64)}var Ma=Se(Ce,[["render",Me]]);export{Ma as default};
