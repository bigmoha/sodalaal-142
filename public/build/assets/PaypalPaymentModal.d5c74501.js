import{P as h}from"./PsModal.6cf0f37c.js";import{P as M,a as $}from"./PsErrorDialog.c252d7f1.js";import{u as x,d as S}from"./dropin.58c78cb4.js";import{P as B}from"./PsValueStore.db7005b9.js";import{d as q,i as d,o as w,c as E,b as n,w as p,a as v,q as P,t as k,F as N,B as T,r as m}from"./app.bcb0820c.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.bb68220d.js";import"./PsIcon.71b0e9da.js";import"./Icons.80b46b2b.js";import"./PsApiService.664f5104.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";const D=q({name:"PaypalPaymentModal",components:{PsModal:h,PsButton:M,PsErrorDialog:$},setup(){const o=d(),e=d(),u=x();B();const r=d();let s,i;function t(a){a=="yes"?s():i(),o.value.toggle(!1)}async function l(a,_,b){o.value.toggle(!0),r.value=a,s=_,i=b;const f=await u.loadToken(r.value);console.log(f);const c=document.querySelector("#submit-button");S.create({authorization:f.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(L,y){c==null||c.addEventListener("click",function(){y.isPaymentMethodRequestable()&&setTimeout(function(){y.requestPaymentMethod(async function(C,g){if(console.log(g),C){e.value.openModal("",T("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=g.nonce,t("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:l,actionClicked:t}}}),F=v("div",{id:"dropin-container"},null,-1),j={class:"flex justify-center mx-auto"};function z(o,e,u,r,s,i){const t=m("ps-button"),l=m("ps-modal"),a=m("ps-error-dialog");return w(),E(N,null,[n(l,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:p(()=>[F,v("div",j,[n(t,{id:"submit-button"},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),n(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=_=>o.actionClicked("no"))},{default:p(()=>[P(k(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),n(a,{ref:"ps_error_dialog"},null,512)],64)}var oo=V(D,[["render",z]]);export{oo as default};
