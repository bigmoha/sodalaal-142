import S from"./PsModal.b5929b7c.js";import h from"./PsButton.2af859b4.js";import{u as M,d as $}from"./dropin.58c78cb4.js";import{P as x}from"./PsValueStore.db7005b9.js";import V from"./PsErrorDialog.d884287b.js";import{d as B,i as f,o as q,c as w,b as r,w as c,a as k,q as y,t as g,F as E,B as N,r as d}from"./app.bcb0820c.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.bb68220d.js";import"./PsLine.115a33c3.js";import"./PsApiService.664f5104.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsLabelTitle.529f301f.js";import"./PsLabel.f618b059.js";const D=B({name:"PaypalPaymentModal",components:{PsModal:S,PsButton:h,PsErrorDialog:V},setup(){const o=f(),e=f(),p=M(),m=x().getLoginUserId();let s,t;function a(n){n=="yes"?s():t(),o.value.toggle(!1)}async function i(n,v){o.value.toggle(!0),s=n,t=v;const b=await p.loadToken(m),l=document.querySelector("#submit-button");$.create({authorization:b.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(j,u){l==null||l.addEventListener("click",function(){u.isPaymentMethodRequestable()&&setTimeout(function(){u.requestPaymentMethod(async function(C,_){if(console.log(_),C){e.value.openModal("",N("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=_.nonce,a("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:i,actionClicked:a}}}),F=k("div",{id:"dropin-container"},null,-1),I={class:"flex justify-center mx-auto"};function L(o,e,p,P,m,s){const t=d("ps-button"),a=d("ps-modal"),i=d("ps-error-dialog");return q(),w(E,null,[r(a,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:c(()=>[F,k("div",I,[r(t,{id:"submit-button"},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),r(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=n=>o.actionClicked("no"))},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),r(i,{ref:"ps_error_dialog"},null,512)],64)}var to=T(D,[["render",L]]);export{to as default};
