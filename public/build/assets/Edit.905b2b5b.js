import{d as z,Z as L,H as N,i as k,y as U,I as M,B as _,o as p,c as h,b as r,w as d,q as l,t as c,a as S,F as H,s as I,f as E,g as V,r as n}from"./app.bcb0820c.js";import T from"./PsVendorLayout.88bdb8b0.js";import{P as J}from"./PsBreadcrumb2.c24fe59b.js";import{P as q}from"./PsDangerDialog.45064bba.js";import{P as Z}from"./PsButton.6e47777c.js";import A from"./VendorDetailVendorInfo.23be9b26.js";import G from"./VendorDetailSubscriptionNotification.f5a04918.js";import K from"./VendorDetailStoreBranches.0d484820.js";import{P as Q}from"./PsLabel.ba854ae6.js";import{P as R}from"./PsLoadingCircleDialog.1c2df66f.js";import{P as W}from"./PsSuccessDialog.c18e6651.js";import{P as X}from"./PsIcon.71b0e9da.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import"./TitleBar.fd59728b.js";import"./PsDropdown.d345be0d.js";import"./PsDropdownSelect.65e73a6d.js";import"./PsToggle.6d7ca6c8.js";import"./toggle.2d374629.js";import"./PsWarningDialog.89df77bf.js";import"./PsModal.fccd5c23.js";import"./vue-neat-modal.bb68220d.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./Icons.80b46b2b.js";import"./SidebarMenu.c894e378.js";import"./SidebarMenuItem.73b90a8b.js";import"./SidebarSubTab.1a8b9e94.js";import"./PsErrorDialog.d3e814f0.js";import"./PsInputWithRightIcon.29f20201.js";import"./PsIcon1.4226e037.js";import"./PsInput.096bf606.js";import"./PsTextarea.f8e79b57.js";import"./PsImageUpload2.3393d801.js";import"./DatePicker.30ccdba0.js";import"./main.7d6b6908.js";import"./index.edd1d404.js";import"./CheckBox.5459521e.js";import"./PsRadioValue.ef17e547.js";import"./PsLabelCaption.e61a7806.js";import"./psApiService.f68724c2.js";import"./moment.9709ab41.js";import"./PsImageUpload.feb8acc0.js";import"./PsLabelTitle3.857bf4b8.js";import"./PsDraggable.b90e2bf9.js";import"./PsLoading.9d8c0dd0.js";const ee=z({name:"Index",components:{Head:L,PsBreadcrumb2:J,PsLabelHeader6:q,PsButton:Z,VendorDetailVendorInfo:A,VendorDetailStoreBranches:K,VendorDetailSubscriptionNotification:G,PsLabel:Q,PsSuccessDialog:W,PsLoadingCircleDialog:R,PsIcon:X},layout:T,props:{storeCan:Object,errors:Object,vendor:Object,coreFieldFilterSettings:Object,branchesCoreFieldFilterSettings:Object,customizeHeaders:Object,customizeDetails:Object,validation:Object,authUser:Object},setup(e){var u,f,x;console.log(e.vendor);let o=N({id:e.vendor.id,name:e.vendor.name,email:e.vendor.email,phone:e.vendor.phone,address:e.vendor.address,description:e.vendor.description,website:e.vendor.website,facebook:e.vendor.facebook,instagram:e.vendor.instagram,logo:(u=e.vendor.logo)==null?void 0:u.img_path,banner_1:(f=e.vendor.banner_1)==null?void 0:f.img_path,banner_2:(x=e.vendor.banner_2)==null?void 0:x.img_path,vendor_relation:{},vendorBranches:e.vendor.vendorBranches,_method:"put"});const t=k(0),i=k(!0),m=U({data:[]}),b=k(),g=k(),C={id:"",vendor_id:"",name:"",email:"",phone:"",address:"",description:"",added_user_id:"",added_date_str:"",is_empty_object:1};M(()=>e.vendor,(v,P)=>{var a,B,D;i.value=!1,y(),o.name=e.vendor.name,o.id=e.vendor.id,o.phone=e.vendor.phone,o.address=e.vendor.address,o.description=e.vendor.description,o.website=e.vendor.website,o.facebook=e.vendor.facebook,o.instagram=e.vendor.instagram,o.logo=(a=e.vendor.logo)==null?void 0:a.img_path,o.banner_1=(B=e.vendor.banner_1)==null?void 0:B.img_path,o.banner_2=(D=e.vendor.banner_2)==null?void 0:D.img_path,setTimeout(()=>{i.value=!0},200),e.customizeHeaders.map((j,ie)=>{e.vendor.vendor_relation.map(O=>{if(j.core_keys_id===O.core_keys_id){let F=O.value;o.vendor_relation[j.core_keys_id]=F==="1"?!0:F==="0"?!1:F}})})}),y();function y(){e.vendor.vendorBranches.length==1&&e.vendor.vendorBranches[0].is_empty_object=="1"?(t.value=0,m.data=[],o.vendorBranches=[]):(t.value=e.vendor.vendorBranches.length,m.data=e.vendor.vendorBranches,o.vendorBranches=e.vendor.vendorBranches)}function s(v){t.value=t.value-1,m.data.splice(v,1)}function w(){t.value=t.value+1,m.data.push(JSON.parse(JSON.stringify(C)))}function $(v){o.vendorBranches=m.data,this.$inertia.post(route("vendor_info.update",v),o,{forceFormData:!0,onBefore:()=>{b.value.openModal(_("core_vendor__update_vendor_title"),_("core_vendor__update_vendor_note"))},onSuccess:()=>{b.value.closeModal(),g.value.openModal(_("core_vendor__update_vendor_success"),_("core_vendor__update_vendor_success_message"),_("core__vendor_btn_ok"),()=>{},!1)},onError:()=>{b.value.closeModal()}})}return{form:o,vendorShow:t,removeVendorBranch:s,addVendorBranch:w,vendorStatus:i,vendorList:m,handleSubmit:$,ps_loading_circle_dialog:b,ps_success_dialog:g}},computed:{breadcrumb(){return[{label:_("core__vendor_my_store_module")},{label:_("core_vendor__edit_vendor_info"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("vendor_info.index"))}},created(){this.customizeHeaders.map((e,o)=>{this.vendor.vendor_relation.map(t=>{if(e.core_keys_id===t.core_keys_id){let i=t.value;this.form.vendor_relation[e.core_keys_id]=i==="1"?!0:i==="0"?!1:i}})})}}),oe={class:"rounded-md border border-secondary-200 px-6 py-8 mb-8"},re={key:0,class:"rounded-md border border-secondary-200 px-6 py-8 mb-8"},te={class:"mt-6"},ne={class:"flex flex-row justify-end space-x-4"},ae={key:1,class:"flex"},de={class:"mb-2.5 flex flex-row justify-end"};function se(e,o,t,i,m,b){const g=n("Head"),C=n("ps-breadcrumb-2"),y=n("vendor-detail-subscription-notification"),s=n("ps-label"),w=n("vendor-detail-vendor-info"),$=n("vendor-detail-store-branches"),u=n("ps-icon"),f=n("ps-button"),x=n("ps-loading-circle-dialog"),v=n("ps-success-dialog"),P=n("ps-layout");return p(),h(H,null,[r(g,{title:e.$t("core__vendor_my_store_module")},null,8,["title"]),r(P,null,{default:d(()=>[r(C,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),r(y,{expiredStatus:e.vendor.expire_status,expiredDate:e.vendor.expired_date},null,8,["expiredStatus","expiredDate"]),r(s,{class:"mb-8 text-xl lg:text-3xl font-semibold"},{default:d(()=>[l(c(e.$t("core_vendor__vendor_info")),1)]),_:1}),S("div",oe,[r(s,{class:"text-xl lg:text-2xl font-semibold"},{default:d(()=>[l(c(e.$t("core_vendor__basic_info")),1)]),_:1}),r(w,{class:"mt-8",validation:e.validation,errors:e.errors,form:e.form,coreFieldFilterSettings:e.coreFieldFilterSettings,customizeHeaders:e.customizeHeaders,authUser:e.authUser,customizeDetails:e.customizeDetails},null,8,["validation","errors","form","coreFieldFilterSettings","customizeHeaders","authUser","customizeDetails"])]),e.vendorStatus&&e.vendorShow>0?(p(),h("div",re,[r(s,{class:"text-xl lg:text-2xl font-semibold flex flex-col space-y-8"},{default:d(()=>[l(c(e.$t("core_vendor__vendor_branches")),1)]),_:1}),(p(!0),h(H,null,I(e.vendorShow,a=>(p(),h("div",{key:a},[r($,{class:"mt-8",storeBranches:e.vendorList.data[a-1],authUser:e.authUser,coreFieldFilterSettings:e.branchesCoreFieldFilterSettings},null,8,["storeBranches","authUser","coreFieldFilterSettings"]),S("div",te,[S("div",ne,[a==e.vendorShow?(p(),E(s,{key:0,onClick:o[0]||(o[0]=B=>e.addVendorBranch()),class:"flex flex-row text-base cursor-pointer px-4 py-2 border border-primary-500 rounded text-primary-500",textColor:"text-primary-500"},{default:d(()=>[r(u,{name:"plus",class:"me-1"}),l(" "+c(e.$t("core_vendor__add_branch")),1)]),_:1})):V("",!0),r(s,{class:"flex flex-row px-4 py-2 border border-primary-500 rounded text-base cursor-pointer text-primary-500",textColor:"text-primary-500",onClick:B=>e.removeVendorBranch(a-1)},{default:d(()=>[r(u,{name:"minus",class:"me-1"}),l(" "+c(e.$t("core_vendor__remove_branch")),1)]),_:2},1032,["onClick"])])])]))),128))])):V("",!0),e.vendorShow==0?(p(),h("div",ae,[r(s,{onClick:o[1]||(o[1]=a=>e.addVendorBranch()),class:"flex flex-row mb-8 text-base cursor-pointer px-4 py-2 border border-primary-500 rounded text-primary-500",textColor:"text-primary-500"},{default:d(()=>[r(u,{name:"plus",class:"me-1"}),l(" "+c(e.$t("core_vendor__add_branch")),1)]),_:1})])):V("",!0),S("div",de,[r(f,{onClick:o[2]||(o[2]=a=>e.handleCancel()),type:"reset",class:"me-4",colors:"text-primary-500",hover:""},{default:d(()=>[l(c(e.$t("core__vendor_btn_cancel")),1)]),_:1}),r(f,{disabled:!e.storeCan.updateMyVendor,onClick:o[3]||(o[3]=a=>e.handleSubmit(e.vendor.id)),class:"transition-all duration-300 min-w-3xs",padding:"px-7 py-2",rounded:"rounded",hover:"",focus:""},{default:d(()=>[r(s,{textColor:"text-white dark:text-secondaryDark-black"},{default:d(()=>[l(c(e.$t("core__vendor_btn_update")),1)]),_:1})]),_:1},8,["disabled"])]),r(x,{ref:"ps_loading_circle_dialog"},null,512),r(v,{ref:"ps_success_dialog"},null,512)]),_:1})],64)}var eo=Y(ee,[["render",se]]);export{eo as default};
