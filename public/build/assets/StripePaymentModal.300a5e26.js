import{g as B,w as D}from"./stripe.esm.3ed8eaf3.js";import{P as V}from"./PsModal.6cf0f37c.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import{o as u,c as x,l as k,n as N,d as v,r as n,f as y,w as t,i as C,B as T,b as r,q as g,t as m,a as w,g as O,F as z}from"./app.bcb0820c.js";import{b as M,c as F,P as H,a as j}from"./PsErrorDialog.c252d7f1.js";import{P as q}from"./PsValueStore.db7005b9.js";import"./vue-neat-modal.bb68220d.js";import"./PsIcon.71b0e9da.js";import"./Icons.80b46b2b.js";const K={name:"PsLabel",props:{textColor:{type:String,default:"text-secondary-800 dark:text-secondary-100"}}};function W(e,o,a,l,c,d){return u(),x("p",{class:N(["text-sm font-medium",a.textColor===""?"text-secondary-800 dark:text-secondaryDark-white":a.textColor])},[k(e.$slots,"default")],2)}var A=$(K,[["render",W]]);const G=v({name:"PsLabelHeader4",components:{PsLabel:A},props:{textColor:{type:String,default:"text-secondary-800 dark:text-secondaryDark-white"}}});function I(e,o,a,l,c,d){const s=n("ps-label");return u(),y(s,{class:"lg:text-2xl sm:text-xl text-2xl font-semibold",textColor:e.textColor},{default:t(()=>[k(e.$slots,"default")]),_:3},8,["textColor"])}var J=$(G,[["render",I]]);const Q=v({name:"PsLabelTitle",components:{PsLabel:M},props:{textColor:{type:String,default:"text-secondary-800 dark:text-secondaryDark-white"}}});function R(e,o,a,l,c,d){const s=n("ps-label");return u(),y(s,{class:"text-base font-medium",textColor:e.textColor},{default:t(()=>[k(e.$slots,"default")]),_:3},8,["textColor"])}var U=$(Q,[["render",R]]);const X=v({components:{PsModal:F,PsLabel:M,PsLabelTitle:U},setup(){const e=C(),o=C(T("core.ps_loading_dialog__loading"));function a(){e.value.toggle(!0)}function l(){e.value.toggle(!1)}function c(d){o.value=d}return{psmodal:e,openModal:a,closeModal:l,message:o,setMessage:c}}});function Y(e,o,a,l,c,d){const s=n("ps-label-title"),f=n("ps-label"),p=n("ps-modal");return u(),y(p,{ref:"psmodal",maxWidth:"450px",isClickOut:!1,class:"z-50"},{title:t(()=>[r(s,null,{default:t(()=>[g(m(e.$t("ps_loading_dialog__please_wait")),1)]),_:1})]),body:t(()=>[r(f,null,{default:t(()=>[g(m(e.message),1)]),_:1})]),footer:t(()=>[]),_:1},512)}var Z=$(X,[["render",Y]]);const ee=v({components:{StripeElement:B,PsModal:V,PsLabelHeader4:J,PsButton:H,PsLoadingDialog:Z,PsErrorDialog:j},setup(){const e=C(),o=q();let a,l;function c(i){i=="no"&&l(),e.value.toggle(!1)}function d(i,_){e.value.toggle(!0),a=i,l=_}const s=C(),f=o.getPublishedKey(),{stripe:p,elements:[b]}=D({key:f||"",elements:[{type:"card",options:{}}]});return{psmodal:e,openModal:d,actionClicked:c,event:s,cardElement:b,registerCard:()=>{var i,_,h,S;s.value!=null&&((i=s.value)==null?void 0:i.complete)!=null&&((_=s.value)==null?void 0:_.complete)&&((h=p.value)==null||h.elements().create("card"),(S=p.value)==null||S.createToken(b.value).then(function(E){var L;localStorage.paymentNonce=(L=E.token)==null?void 0:L.id,a(),e.value.toggle(!1)}))}}}}),te={class:"flex flex-col items-center mt-8"},oe={class:"flex items-center justify-center mb-4"},se={key:0};function ae(e,o,a,l,c,d){const s=n("ps-label-header-4"),f=n("StripeElement"),p=n("ps-button"),b=n("ps-modal"),P=n("ps-loading-dialog"),i=n("ps-error-dialog");return u(),x(z,null,[r(b,{ref:"psmodal",isClickOut:!1},{title:t(()=>[w("div",te,[r(s,{class:"font-bold"},{default:t(()=>[g(m(e.$t("stripe_credit_card_modal__card_entry")),1)]),_:1})])]),body:t(()=>[r(f,{element:e.cardElement,onChange:o[0]||(o[0]=_=>e.event=_)},null,8,["element"])]),footer:t(()=>[w("div",oe,[r(p,{class:"text-center w-60 mx-auto",onClick:e.registerCard},{default:t(()=>[g(m(e.$t("stripe_credit_card_modal__save")),1)]),_:1},8,["onClick"]),r(p,{class:"text-center w-60 mx-auto ms-4",theme:"btn-second",onClick:o[1]||(o[1]=_=>e.actionClicked("no"))},{default:t(()=>[g(m(e.$t("stripe_credit_card_modal__cancel")),1)]),_:1})])]),default:t(()=>[e.event&&e.event.error?(u(),x("div",se,m(e.event.error.message),1)):O("",!0)]),_:1},512),r(P,{ref:"psloading",isClickOut:!1},null,512),r(i,{ref:"ps_error_dialog"},null,512)],64)}var ue=$(ee,[["render",ae]]);export{ue as default};
